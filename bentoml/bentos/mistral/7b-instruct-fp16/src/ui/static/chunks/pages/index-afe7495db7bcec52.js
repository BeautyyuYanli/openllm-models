(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(456)}])},456:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return P}});var s=r(5893),n=r(7294),l=r(5697),a=r.n(l),o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},i=Object.defineProperty,c=Object.defineProperties,u=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,m=(e,t,r)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))p.call(t,r)&&m(e,r,t[r]);if(d)for(var r of d(t))f.call(t,r)&&m(e,r,t[r]);return e},x=(e,t)=>c(e,u(t)),y=(e,t)=>{var r={};for(var s in e)p.call(e,s)&&0>t.indexOf(s)&&(r[s]=e[s]);if(null!=e&&d)for(var s of d(e))0>t.indexOf(s)&&f.call(e,s)&&(r[s]=e[s]);return r},b=(e,t,r)=>{let s=(0,n.forwardRef)((t,s)=>{var{color:l="currentColor",size:a=24,stroke:i=2,children:c}=t,u=y(t,["color","size","stroke","children"]);return(0,n.createElement)("svg",h(x(h({ref:s},o),{width:a,height:a,stroke:l,strokeWidth:i,className:`tabler-icon tabler-icon-${e}`}),u),[...r.map(([e,t])=>(0,n.createElement)(e,t)),...c||[]])});return s.propTypes={color:a().string,size:a().oneOfType([a().string,a().number]),stroke:a().oneOfType([a().string,a().number])},s.displayName=`${t}`,s},v=b("arrow-up","IconArrowUp",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M18 11l-6 -6",key:"svg-1"}],["path",{d:"M6 11l6 -6",key:"svg-2"}]]);let g=e=>{let{onSend:t}=e,[r,l]=(0,n.useState)(),a=(0,n.useRef)(null),o=e=>{let t=e.target.value;if(t.length>4e3){alert("Message limit is 4000 characters");return}l(t)},i=()=>{if(!r){alert("Please enter a message");return}t({role:"user",content:r}),l("")},c=e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),i())};return(0,n.useEffect)(()=>{if(a&&a.current){var e;a.current.style.height="inherit",a.current.style.height="".concat(null===(e=a.current)||void 0===e?void 0:e.scrollHeight,"px")}},[r]),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("textarea",{ref:a,className:"min-h-[44px] rounded-lg pl-4 pr-12 py-2 w-full focus:outline-none focus:ring-1 focus:ring-neutral-300 border-2 border-neutral-200",style:{resize:"none"},placeholder:"Type a message...",value:r,rows:1,onChange:o,onKeyDown:c}),(0,s.jsx)("button",{onClick:()=>i(),children:(0,s.jsx)(v,{className:"absolute right-2 bottom-3 h-8 w-8 hover:cursor-pointer rounded-full p-1 bg-blue-500 text-white hover:opacity-80"})})]})};var j=b("dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);let w=()=>(0,s.jsx)("div",{className:"flex flex-col flex-start",children:(0,s.jsx)("div",{className:"flex items-center bg-neutral-200 text-neutral-900 rounded-2xl px-4 py-2 w-fit",style:{overflowWrap:"anywhere"},children:(0,s.jsx)(j,{className:"animate-pulse"})})}),N=e=>{let{message:t}=e;return(0,s.jsx)("div",{className:"flex flex-col ".concat("assistant"===t.role?"items-start":"items-end"),children:(0,s.jsx)("div",{className:"flex items-center ".concat("assistant"===t.role?"bg-neutral-200 text-neutral-900":"bg-blue-500 text-white"," rounded-2xl px-3 py-2 max-w-[67%] whitespace-pre-wrap"),style:{overflowWrap:"anywhere"},children:t.content})})},k=e=>{let{onReset:t}=e;return(0,s.jsx)("div",{className:"flex flex-row items-center",children:(0,s.jsx)("button",{className:"text-sm sm:text-base text-neutral-900 font-semibold rounded-lg px-4 py-2 bg-neutral-200 hover:bg-neutral-300 focus:outline-none focus:ring-1 focus:ring-neutral-300",onClick:()=>t(),children:"Reset"})})},O=e=>{let{messages:t,loading:r,onSend:n,onReset:l}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"flex flex-row justify-between items-center mb-4 sm:mb-8",children:(0,s.jsx)(k,{onReset:l})}),(0,s.jsxs)("div",{className:"flex flex-col rounded-lg px-2 sm:p-4 sm:border border-neutral-300",children:[t.map((e,t)=>(0,s.jsx)("div",{className:"my-1 sm:my-1.5",children:(0,s.jsx)(N,{message:e})},t)),r&&(0,s.jsx)("div",{className:"my-1 sm:my-1.5",children:(0,s.jsx)(w,{})}),(0,s.jsx)("div",{className:"mt-4 sm:mt-8 bottom-[56px] left-0 w-full",children:(0,s.jsx)(g,{onSend:n})})]})]})},T=()=>(0,s.jsx)("div",{className:"flex h-[30px] sm:h-[50px] border-t border-neutral-300 py-2 px-8 items-center sm:justify-between justify-center"}),_=()=>(0,s.jsx)("div",{className:"flex h-[50px] sm:h-[60px] border-b border-neutral-300 py-2 px-2 sm:px-8 items-center justify-between",children:(0,s.jsx)("div",{className:"font-bold text-3xl flex items-center",children:(0,s.jsx)("a",{className:"ml-2 hover:opacity-50",href:"https://github.com/bentoml/openllm",children:"Chat"})})});var E=r(9008),C=r.n(E);function P(){let[e,t]=(0,n.useState)([]),[r,l]=(0,n.useState)(!1),a=(0,n.useRef)(null),o=()=>{var e;null===(e=a.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},i=async r=>{let s=[...e,r];t(s),l(!0);let n=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:s})});if(!n.ok)throw l(!1),Error(n.statusText);let a=n.body;if(!a)return;l(!1);let o=a.getReader(),i=new TextDecoder,c=!1,u=!0;for(;!c;){let{value:e,done:r}=await o.read();c=r;let s=i.decode(e);u?(u=!1,t(e=>[...e,{role:"assistant",content:s}])):t(e=>{let t=e[e.length-1],r={...t,content:t.content+s};return[...e.slice(0,-1),r]})}},c=()=>{t([])};return(0,n.useEffect)(()=>{o()},[e]),(0,n.useEffect)(()=>{t([])},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(C(),{children:[(0,s.jsx)("title",{children:"Chat"}),(0,s.jsx)("meta",{name:"description",content:"A simple chatbot starter kit for OpenAI's chat model using Next.js, TypeScript, and Tailwind CSS."}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,s.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,s.jsx)(_,{}),(0,s.jsx)("div",{className:"flex-1 overflow-auto sm:px-10 pb-4 sm:pb-10",children:(0,s.jsxs)("div",{className:"max-w-[800px] mx-auto mt-4 sm:mt-12",children:[(0,s.jsx)(O,{messages:e,loading:r,onSend:i,onReset:c}),(0,s.jsx)("div",{ref:a})]})}),(0,s.jsx)(T,{})]})]})}},9008:function(e,t,r){e.exports=r(2636)},2703:function(e,t,r){"use strict";var s=r(414);function n(){}function l(){}l.resetWarningCache=n,e.exports=function(){function e(e,t,r,n,l,a){if(a!==s){var o=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:l,resetWarningCache:n};return r.PropTypes=r,r}},5697:function(e,t,r){e.exports=r(2703)()},414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);